---
config:
  layout: elk
---
flowchart TB
    %% =========================
    %% 중앙 플로우 (주문 및 옵션 선택)
    %% =========================
    S(["시작"])

    C1["메뉴 목록 표시"]
    C2["메뉴 선택"]
    C3["옵션 선택 팝업 표시"]
    C4["옵션 선택<br/>(필수/선택)"]
    D1{"필수 옵션 충족?"}
    A1@{shape: doc, label: "[알럿]<br/>필수 옵션을 선택해 주세요"}

    C5["수량/구성 확정"]
    C6["주문 담기(주문 생성)"]
    O1@{shape: doc, label: "[안내]<br/>주문이 담겼습니다"}

    E(["종료"])

    %% =========================
    %% 중앙 플로우 연결
    %% =========================
    S --> C1 --> C2 --> C3 --> C4 --> D1
    D1 -- "아니오" --> A1 --> C4
    D1 -- "예" --> C5 --> C6 --> O1 --> E

    %% =========================
    %% DB 테이블 (우측 여백 주석 영역)
    %% =========================
    subgraph DB_LABELS["DB 테이블 (참조/생성)"]
        DB_MENU@{shape: rect, label: "[DB]<br/>MENUS,<br/>MENU_CATEGORIES"}
        DB_MAP@{shape: rect, label: "[DB]<br/>MENU_OPTION_MAPPINGS,<br/>OPTION_GROUPS"}
        DB_OPT@{shape: rect, label: "[DB]<br/>HAS_OPTIONS,<br/>OPTIONS"}
        DB_ORDER@{shape: rect, label: "[DB]<br/>STORE_ORDERS"}
        DB_DETAIL@{shape: rect, label: "[DB]<br/>ORDER_DETAILS,<br/>ORDER_DETAIL_OPTIONS"}
    end

    %% =========================
    %% DB 연결 (설명용 점선, 핵심만)
    %% =========================
    C1 -.-> DB_MENU
    C3 -.-> DB_MAP
    C4 -.-> DB_OPT
    C6 -.-> DB_ORDER
    C6 -.-> DB_DETAIL

    %% =========================
    %% DB 스타일 강조
    %% =========================
    style DB_MENU   fill:#FFF8E1,stroke:#F9A825,stroke-width:1px
    style DB_MAP    fill:#FFF8E1,stroke:#F9A825,stroke-width:1px
    style DB_OPT    fill:#FFF8E1,stroke:#F9A825,stroke-width:1px
    style DB_ORDER  fill:#FFF8E1,stroke:#F9A825,stroke-width:1px
    style DB_DETAIL fill:#FFF8E1,stroke:#F9A825,stroke-width:1px