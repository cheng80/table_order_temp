---
config:
  layout: elk
---
flowchart TB
    S(["시작"])

    subgraph CUSTOMER["손님"]
        P1["대기 등록 화면 표시"]

        subgraph FORM["대기 등록 입력 폼"]
            I1[/"이름 입력"/]
            I2[/"전화번호 입력 (필수)"/]
            I3[/"인원 수 입력"/]
        end

        P2["등록 요청"]
    end

    subgraph SYSTEM["시스템"]
        D1{"필수값 누락?"}
        A1@{shape: doc,label: "[시스템 알럿]<br/>이름과 전화번호는 필수입니다."}

        D2{"활성 대기 중복?"}
        A2@{shape: doc,label: "[시스템 알럿]<br/>이미 대기 등록된 전화번호입니다."}

        P3["대기 번호 발급"]
        P4["대기 항목 생성<br/>상태: WAITING"]

        O1@{shape: doc,label: "[안내]<br/>대기 등록이 완료되었습니다."}
    end

    E(["종료"])

    %% 입력 흐름
    I1 --> I2 --> I3 --> P2

    %% 메인 플로우
    S --> P1 --> I1
    P2 --> D1

    D1 -- "예" --> A1 --> P1
    D1 -- "아니오" --> D2

    D2 -- "예" --> A2 --> E
    D2 -- "아니오" --> P3 --> P4 --> O1 --> E