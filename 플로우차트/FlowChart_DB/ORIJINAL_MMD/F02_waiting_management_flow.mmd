---
config:
  layout: elk
---
flowchart TB
    %% =========================
    %% 중앙 플로우 (대기 관리 / 호출)
    %% =========================
    S(["시작"])

    O1["점주 대기 관리 화면 진입"]
    X1["현재 대기 목록 조회"]
    D1{"대기 존재?"}

    O2["대기 번호 선택"]
    O3["대기 호출"]
    D2{"입장 확인?"}

    O4["입장 처리"]
    O5["노쇼 처리"]

    O6@{shape: doc, label: "[안내]<br/>대기 호출 완료"}
    O7@{shape: doc, label: "[안내]<br/>노쇼 처리 완료"}

    E(["종료"])

    %% =========================
    %% 중앙 플로우 연결
    %% =========================
    S --> O1 --> X1 --> D1

    D1 -- "아니오" --> E
    D1 -- "예" --> O2 --> O3 --> D2

    D2 -- "예" --> O4 --> O6 --> E
    D2 -- "아니오" --> O5 --> O7 --> E

    %% =========================
    %% DB 테이블 (우측 여백 주석 영역)
    %% =========================
    subgraph DB_LABELS["DB 테이블 (참조/갱신)"]
        DB_WAIT@{shape: rect, label: "[DB]<br/>WAITING_LISTS"}
        DB_TABLE@{shape: rect, label: "[DB]<br/>STORE_TABLES"}
    end

    %% =========================
    %% DB 연결 (설명용 점선)
    %% =========================
    X1 -.-> DB_WAIT
    O3 -.-> DB_WAIT
    O4 -.-> DB_WAIT
    O5 -.-> DB_WAIT

    O4 -.-> DB_TABLE

    %% =========================
    %% DB 스타일 강조
    %% =========================
    style DB_WAIT  fill:#FFF8E1,stroke:#F9A825,stroke-width:1px
    style DB_TABLE fill:#FFF8E1,stroke:#F9A825,stroke-width:1px