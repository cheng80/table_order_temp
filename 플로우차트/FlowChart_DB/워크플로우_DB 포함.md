# 테이블오더 앱 플로우차트 종합 문서 (F00~F06)

본 문서는 현재 기획·설계 중인 테이블오더 앱의 **전체 플로우차트(F00~F06)**를 하나의 흐름으로 정리한 문서이다.
각 플로우는 실제 실행 순서라기보다 **설계 이해 순서**를 기준으로 배열되었으며,
운영 규칙 → 사용자 진입 → 주문/결제 → 마감으로 자연스럽게 이어지도록 구성되어 있다.

---

## F00_overall_daily_flow
### 전체 하루 운영 개요 플로우

**주제**  
하루 운영의 큰 흐름을 한 장으로 요약한 개요 플로우.

**설명**  
- 점주 로그인 및 운영 시작(F01)
- 대기 시스템 운영 정책(F02)
- 손님 대기 등록(F03)
- 주문 및 옵션 선택(F04)
- 결제 및 KDS 전송(F05)
- 하루 마감 및 집계(F06)

F00은 상세 로직 설명을 목적으로 하지 않으며, **전체 시스템 구조를 한눈에 보여주는 요약 다이어그램**으로 유지한다.

---

## F01_owner_login_and_startup
### 점주 로그인 및 운영 시작 플로우

**주제**  
점주가 앱에 로그인하고 하루 운영을 시작하기 위해 필요한 초기화 과정을 수행하는 흐름.

**설명**  
- 점주는 아이디/비밀번호로 로그인한다.
- 인증 실패 시 알럿을 표시하고 재입력을 유도한다.
- 인증 성공 시 운영 컨텍스트를 초기화한다.
- 하루 운영 기준을 위해 **금일 날씨 정보를 1회 수집**한다.
  - 날씨 수집 실패 시에도 운영은 계속 가능하다.
- 전일 미처리 대기 데이터가 있는 경우 이를 정리한다.
- 운영 준비 완료 안내 후 점주 대시보드로 진입한다.

---

## F02_waiting_management_flow
### 대기 관리 및 호출 플로우 (운영 관점)

**주제**  
점주가 대기열을 직접 관리하고, 호출·입장·노쇼를 명시적으로 처리하는 운영 중심 플로우.

**설명**  
- 점주는 대기 관리 화면에서 현재 대기 목록을 조회한다.
- 대기가 없는 경우 별도 처리 없이 종료된다.
- 호출 대상이 있을 경우 점주가 직접 대기 번호를 선택해 호출한다.
- 호출 이후 자동 처리 없이, 점주가 **입장 확정 또는 노쇼 처리**를 선택한다.
- 처리 결과에 따라 대기 상태가 확정된다.

이 플로우는 대기 시스템의 **운영 규칙을 정의하는 역할**을 가진다.

---

## F03_waiting_registration_flow
### 손님 대기 등록 플로우 (손님 관점)

**주제**  
손님이 대기 현황을 확인하고 대기를 등록하는 진입 플로우.

**설명**  
- 손님은 대기 현황 화면에서 대기 등록을 선택한다.
- 이름, 전화번호(필수), 인원 수를 입력한다.
- 필수값 누락 시 알럿을 표시하고 재입력을 요구한다.
- 동일 전화번호로 활성 대기가 존재하면 중복 등록을 제한한다.
- 검증이 완료되면 대기 번호를 발급하고 대기 상태로 저장한다.
- 만석 여부나 예상 대기 시간은 **등록 가능 여부를 제한하지 않으며 참고 정보로만 사용**된다.

---

## F04_order_and_option_flow
### 주문 및 옵션 선택 플로우

**주제**  
손님의 메뉴 선택부터 옵션 검증, 주문 구성을 완료하는 주문 생성 흐름.

**설명**  
- 손님은 메뉴 목록에서 메뉴를 선택한다.
- 옵션 팝업에서 필수/선택 옵션을 선택한다.
- 필수 옵션이 충족되지 않으면 알럿을 표시하고 옵션 선택 단계로 되돌린다.
- 옵션 검증이 완료되면 수량 및 구성을 확정한다.
- 주문을 담아 주문 구성이 완료된다.

이 단계에서는 **주문 상세 단위(메뉴/옵션 스냅샷)**를 중심으로 주문이 구성된다.

---

## F05_payment_and_kds_flow
### 결제 및 KDS 전송 플로우

**주제**  
결제를 확정하고, 확정된 주문을 주방(KDS)으로 전달하는 흐름.

**설명**  
- 점주 또는 손님이 결제를 요청한다.
- 결제 승인 결과에 따라 성공/실패를 판단한다.
- 결제 실패 시 알럿을 표시하고 재시도를 유도한다.
- 결제 성공 시 주문 상태를 확정한다.
- 확정된 주문을 기반으로 KDS 티켓을 생성하고 전송한다.
- 주방에서는 티켓을 확인하고 조리 상태를 업데이트한다.

---

## F06_daily_close_and_summary_flow
### 하루 마감 및 운영 종료 플로우

**주제**  
점주가 하루 운영을 종료하고, 대기 및 매출 데이터를 정리하는 마감 플로우.

**설명**  
- 점주는 운영 종료(마감)를 선택하고 확인 여부를 결정한다.
- 마감을 취소하면 운영을 계속한다.
- 마감을 확정하면 미처리 대기 데이터를 조회한다.
- 미처리 대기가 존재할 경우 운영 기준에 따라 일괄 마감 처리한다.
- 이후 금일 매출 및 순이익을 집계한다.
- 마감 완료 안내 후 하루 운영이 종료된다.

**운영 규칙**  
- 자정은 기준일 구분을 위한 기준일 뿐, 백그라운드 자동 마감은 수행하지 않는다.
- 전일 데이터 정리는 다음날 앱 진입 시(F01) 처리된다.

---

## 문서 정렬 기준 요약

- F00은 전체 개요 플로우로 유지
- F01~F06은 **설계 이해 순서** 기준 정렬
- 운영 규칙(F02)을 먼저 설명하고, 사용자 진입(F03)을 뒤에 배치
- 각 플로우는 중앙 흐름 + 여백(DB 주석) 구조를 전제로 설계됨

