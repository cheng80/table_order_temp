# 메뉴–옵션 구조 이해를 위한 더미 데이터 예시

이 문서는 **옵션이 메뉴에 어떻게 붙고/안 붙는지**를 직관적으로 이해하기 위해,
실제 운영 시나리오를 기준으로 **옵션 / 옵션그룹 / 메뉴 / 메뉴-옵션 매핑**의 역할과 더미 데이터를 정리한 문서다.

---

## 1. 시나리오 정의

### 메뉴
- 아메리카노 (커피)
- 카페라떼 (커피)
- 양송이 스프 (스프)

### 옵션 정책
- 커피 메뉴에는:
  - 샷 추가
  - 얼음량 선택
- 스프 메뉴에는:
  - 옵션 없음

> 핵심 요구사항:
> **“샷 추가 옵션은 커피에만 보이고, 스프에는 보이면 안 된다.”**

---

## 2. MENU (메뉴)

```sql
menu
---------------------------------------------
menu_id | name         | price
---------------------------------------------
1       | 아메리카노    | 4000
2       | 카페라떼      | 4500
3       | 양송이 스프   | 6000
```

- 메뉴 자체에는 **옵션 정보가 전혀 없다**
- 옵션 노출 여부는 전부 별도 테이블에서 결정됨

---

## 3. OPTION_GROUPS (옵션 그룹)

> 옵션 그룹은 **선택 UI 단위**이며, 매장 공용 자산이다.

```sql
option_groups
-----------------------------------------------------------
option_group_id | name     | is_exclusive | min_select | max_select
-----------------------------------------------------------
10              | 샷 추가   | true         | 0          | 1
11              | 얼음량    | true         | 1          | 1
```

- **샷 추가**: 선택 안 해도 됨 (0~1)
- **얼음량**: 반드시 1개 선택

---

## 4. OPTIONS (옵션)

> 옵션 그룹 안에 들어가는 실제 선택지

```sql
options
--------------------------------------------------------
option_id | option_group_id | name        | extra_price
--------------------------------------------------------
100       | 10              | 샷 추가     | 500

110       | 11              | 얼음 적게   | 0
111       | 11              | 기본        | 0
112       | 11              | 얼음 많이   | 0
```

- 여기까지는 **"이 매장에 이런 옵션들이 존재한다"**는 정의일 뿐
- 아직 **어느 메뉴에 쓰일지는 결정되지 않았다**

---

## 5. MENU_OPTION_MAPPINGS (🔥 핵심 테이블)

> **이 메뉴에서 어떤 옵션 그룹을 사용할 수 있는지 결정하는 테이블**

```sql
menu_option_mappings
---------------------------------------------
mapping_id | menu_id | option_group_id
---------------------------------------------
1          | 1       | 10   -- 아메리카노 + 샷 추가
2          | 1       | 11   -- 아메리카노 + 얼음량

3          | 2       | 10   -- 카페라떼 + 샷 추가
4          | 2       | 11   -- 카페라떼 + 얼음량
```

❌ **menu_id = 3 (양송이 스프)는 여기에 등장하지 않는다**

---

## 6. 최종적으로 화면에 보이는 결과

### 아메리카노
- 옵션 그룹
  - 샷 추가
  - 얼음량

### 카페라떼
- 옵션 그룹
  - 샷 추가
  - 얼음량

### 양송이 스프
- 옵션 그룹
  - 없음

> 스프에 샷 추가가 보이지 않는 이유는 단 하나
> **menu_option_mappings에 해당 메뉴의 데이터가 없기 때문**

---

## 7. 구조를 한 문장으로 요약

> **옵션과 옵션그룹은 ‘존재’를 정의하고**  
> **메뉴-옵션 매핑은 ‘노출 여부’를 결정한다**

---

## 8. 이 구조의 장점

- 옵션을 한 번 만들어 여러 메뉴에서 재사용 가능
- 메뉴별로 옵션을 쉽게 붙였다/뗄 수 있음
- 스프처럼 옵션 없는 메뉴도 자연스럽게 처리됨
- 주문 시에는 옵션 스냅샷을 남겨 가격/정책 변경과 분리 가능

---

## 9. 다음 단계에서 확장 가능한 포인트

- 메뉴별 옵션 추가금 오버라이드
- 옵션그룹 순서(menu별 정렬)
- 특정 시간대/재고에 따른 옵션 노출 제어
- 옵션그룹 대량 적용 UI

이 문서는 **개념 ERD와 실제 데이터 흐름을 연결하기 위한 기준 예시**로 사용하면 된다.

